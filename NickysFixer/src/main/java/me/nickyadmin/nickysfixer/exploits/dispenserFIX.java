package me.nickyadmin.nickysfixer.exploits;

import me.nickyadmin.nickysfixer.Main;
import org.bukkit.Material;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockDispenseEvent;
import org.bukkit.inventory.ItemStack;

public class dispenserFIX implements Listener {
    private final Main plugin;

    public dispenserFIX(Main plugin) {
        this.plugin = plugin;
    }
    @EventHandler
    private void onDispense(BlockDispenseEvent event) {
        FileConfiguration config = plugin.getConfig();
        ItemStack item = event.getItem();
        if (config.getBoolean("fix-dispenser-crash-exploit") && (item.getType() == Material.BLACK_SHULKER_BOX
                || item.getType() == Material.BLUE_SHULKER_BOX
                || item.getType() == Material.GREEN_SHULKER_BOX
                || item.getType() == Material.CYAN_SHULKER_BOX
                || item.getType() == Material.GRAY_SHULKER_BOX
                || item.getType() == Material.LIGHT_BLUE_SHULKER_BOX
                || item.getType() == Material.LIME_SHULKER_BOX
                || item.getType() == Material.MAGENTA_SHULKER_BOX
                || item.getType() == Material.ORANGE_SHULKER_BOX
                || item.getType() == Material.PINK_SHULKER_BOX
                || item.getType() == Material.PURPLE_SHULKER_BOX
                || item.getType() == Material.RED_SHULKER_BOX
                || item.getType() == Material.SILVER_SHULKER_BOX
                || item.getType() == Material.WHITE_SHULKER_BOX
                || item.getType() == Material.YELLOW_SHULKER_BOX)) {
            if (event.getBlock().getLocation().getY() == 255 || event.getBlock().getLocation().getY() < 1) {
                event.setCancelled(true);
            }
        }
    }
}
